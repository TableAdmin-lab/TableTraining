<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <link rel="icon" type="image/png" href="icon.png">
    <title>TABLE By YOCO Training</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        
        :root {
            --bg-dark: #020617; /* Slate 950 */
            --panel-bg: rgba(15, 23, 42, 0.6);
            --accent-primary: #3b82f6;
            --accent-glow: rgba(59, 130, 246, 0.5);
            --text-main: #f8fafc;
            --text-muted: #94a3b8;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--bg-dark);
            background-image: 
                radial-gradient(circle at 0% 0%, rgba(59, 130, 246, 0.08) 0%, transparent 40%),
                radial-gradient(circle at 100% 100%, rgba(99, 102, 241, 0.08) 0%, transparent 40%);
            color: var(--text-main);
            height: 100vh;
            height: 100dvh; 
        }

        .glass-panel {
            background: var(--panel-bg);
            backdrop-filter: blur(16px);
            -webkit-backdrop-filter: blur(16px);
            border: 1px solid rgba(255, 255, 255, 0.03);
        }

        .glass-header {
            background: rgba(2, 6, 23, 0.85);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }

        /* Custom Scrollbar */
        .custom-scrollbar::-webkit-scrollbar { width: 4px; }
        .custom-scrollbar::-webkit-scrollbar-track { background: transparent; }
        .custom-scrollbar::-webkit-scrollbar-thumb { background: rgba(255, 255, 255, 0.1); border-radius: 10px; }
        .custom-scrollbar::-webkit-scrollbar-thumb:hover { background: rgba(255, 255, 255, 0.2); }

        /* Video List Items */
        .playlist-item {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            border-left: 2px solid transparent;
        }
        .playlist-item:hover {
            background: rgba(255, 255, 255, 0.03);
        }
        .playlist-item.active-video {
            background: rgba(59, 130, 246, 0.08);
            border-left: 2px solid var(--accent-primary);
        }
        .playlist-item.active-video h4 {
            color: #60a5fa;
        }
        
        /* Custom Tooltip for Info Icon */
        [data-tooltip]:hover::after {
            content: attr(data-tooltip);
            position: absolute;
            right: 100%;
            top: 50%;
            transform: translateY(-50%);
            margin-right: 10px;
            background: rgba(15, 23, 42, 0.95);
            color: #fff;
            padding: 8px 12px;
            border-radius: 6px;
            font-size: 0.75rem;
            white-space: normal;
            width: 200px;
            z-index: 100;
            border: 1px solid rgba(255,255,255,0.1);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.5);
            pointer-events: none;
        }

        /* Main Video Container */
        .video-wrapper {
            position: relative;
            padding-bottom: 56.25%; /* 16:9 */
            height: 0;
            overflow: hidden;
            border-radius: 12px;
            background: #0f172a; /* Slate 900 fallback */
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.7);
            border: 1px solid rgba(255, 255, 255, 0.05);
        }
        .video-wrapper iframe {
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%; border: 0;
        }

        /* Navigation Buttons */
        .nav-btn {
            text-align: left; padding: 12px 16px; border-radius: 8px;
            font-size: 0.85rem; font-weight: 500; color: var(--text-muted);
            transition: all 0.2s ease; display: flex; align-items: center;
            width: 100%;
            border: 1px solid transparent;
        }
        .nav-btn:hover { color: white; background: rgba(255, 255, 255, 0.03); }
        .nav-btn.active-category {
            background: rgba(59, 130, 246, 0.1); 
            color: #60a5fa;
            border: 1px solid rgba(59, 130, 246, 0.2);
            box-shadow: 0 0 15px rgba(59, 130, 246, 0.1);
        }
        .nav-btn i { width: 24px; text-align: center; margin-right: 10px; font-size: 1.1em; }

        @media (max-width: 768px) {
            .video-wrapper { border-radius: 8px; }
            [data-tooltip]:hover::after { display: none; } /* Hide tooltips on mobile */
        }
        
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }

        /* FAQ Accordion Transition */
        .faq-content {
            transition: max-height 0.3s ease-out, padding 0.3s ease;
            max-height: 0;
            overflow: hidden;
        }
        .faq-item.active .faq-content {
            max-height: 200px;
            padding-bottom: 1rem;
        }
        .faq-item.active .fa-chevron-down {
            transform: rotate(180deg);
        }
    </style>
</head>
<body class="flex flex-col overflow-hidden selection:bg-blue-500/30 selection:text-white">

    <!-- Header -->
    <header class="glass-header h-16 md:h-20 flex-none z-50 px-4 md:px-8 flex items-center justify-between gap-4">
        
        <!-- Logo & Branding -->
        <div class="flex items-center gap-4 flex-none">
            <div class="w-10 h-10 md:w-12 md:h-12 flex items-center justify-center">
                <img src="icon.png" alt="Yoco" class="w-full h-full object-contain" onerror="this.style.display='none'; this.nextElementSibling.style.display='block'">
                <i class="fas fa-layer-group text-blue-500 text-2xl hidden"></i>
            </div>
            <div class="hidden md:block">
                <h1 class="text-lg font-bold tracking-tight text-white leading-none">
                    TABLE <span class="text-blue-500 font-extrabold">By YOCO Training</span>
                </h1>
            </div>
        </div>

        <!-- Search (Desktop) -->
        <div class="hidden md:block flex-1 max-w-md mx-4 ml-auto">
            <div class="relative group">
                <input type="text" id="desktopSearchInput" placeholder="Search lessons..." 
                    class="w-full bg-slate-900/50 border border-slate-700/50 rounded-xl py-2.5 pl-11 pr-4 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:bg-slate-900 transition-all text-slate-200 placeholder-slate-500">
                <i class="fas fa-search absolute left-4 top-1/2 -translate-y-1/2 text-slate-500 group-focus-within:text-blue-500 transition-colors"></i>
            </div>
        </div>

        <!-- Help Actions -->
        <div class="flex items-center gap-3">
            <a href="https://support.yoco.help/en/collections/1131085-table-by-yoco" target="_blank" 
               class="hidden md:flex w-9 h-9 items-center justify-center rounded-lg bg-slate-800/50 hover:bg-slate-700 text-slate-400 hover:text-white transition-colors border border-white/5">
                <i class="fas fa-question"></i>
            </a>
            <a href="https://wa.me/27660392596" target="_blank" 
               class="bg-green-600 hover:bg-green-500 text-white text-xs font-bold py-2 px-4 rounded-lg transition-all shadow-lg shadow-green-900/20 flex items-center gap-2">
                <i class="fab fa-whatsapp text-sm"></i> <span class="hidden md:inline">Support</span>
            </a>
        </div>
    </header>

    <div class="flex flex-1 overflow-hidden flex-col md:flex-row">
        
        <!-- Sidebar Navigation (Desktop) -->
        <aside class="w-72 glass-panel flex-none hidden md:flex flex-col z-20">
            <div class="p-6 flex-1 overflow-y-auto custom-scrollbar">
                <h2 id="navTitle" class="text-[10px] font-bold text-slate-500 uppercase tracking-[0.2em] mb-4 pl-1">Course Modules</h2>
                
                <!-- Dynamic Navigation Container -->
                <nav class="space-y-1" id="categoryNav">
                    <!-- Injected via JS -->
                </nav>
            </div>
        </aside>

        <!-- Main Content Area -->
        <main class="flex-1 flex flex-col md:flex-row overflow-hidden relative bg-gradient-to-b from-transparent to-black/20">
            
            <!-- Mobile Controls -->
            <div class="md:hidden flex-none bg-slate-950 border-b border-white/5 p-4 z-30 space-y-3">
                <div class="relative w-full">
                    <input type="text" id="mobileSearchInput" placeholder="Find a topic..." 
                        class="w-full bg-slate-900 border border-slate-800 rounded-lg py-2.5 pl-10 pr-4 text-sm focus:outline-none focus:ring-1 focus:ring-blue-500 text-white placeholder-slate-600">
                    <i class="fas fa-search absolute left-3.5 top-1/2 -translate-y-1/2 text-slate-600"></i>
                </div>
                <!-- Mobile Horizontal Scroll Filters -->
                <div class="overflow-x-auto whitespace-nowrap flex gap-2 no-scrollbar" id="mobileCategoryNav">
                    <!-- Injected via JS -->
                </div>
            </div>

            <!-- Video Player & Details -->
            <div class="flex-1 flex flex-col h-full overflow-y-auto p-4 md:p-8 custom-scrollbar relative">
                
                <div class="w-full max-w-5xl mx-auto">
                    <!-- Player -->
                    <div class="video-wrapper shadow-2xl ring-1 ring-white/5 bg-slate-900">
                        <iframe id="drivePlayer" src="" frameborder="0" allow="autoplay; fullscreen; picture-in-picture" allowfullscreen></iframe>
                    </div>
                    
                    <!-- Meta Data -->
                    <div class="mt-6 bg-slate-900/40 border border-white/5 rounded-xl p-6 shadow-lg backdrop-blur-sm">
                        <div class="flex flex-col md:flex-row md:items-start justify-between gap-4">
                            <div class="flex-1 space-y-3">
                                <div class="flex items-center gap-3 mb-2">
                                    <span id="playerSectionTag" class="text-[10px] font-bold uppercase tracking-widest bg-slate-800 text-slate-300 border border-slate-700 px-2 py-0.5 rounded-md">BOH</span>
                                    <span id="playerCategoryTag" class="text-[10px] font-bold uppercase tracking-widest bg-blue-500/10 text-blue-400 border border-blue-500/20 px-2 py-0.5 rounded-md">Module</span>
                                </div>
                                <h2 id="playerTitle" class="text-2xl md:text-3xl font-bold text-white leading-tight tracking-tight">Select a Lesson</h2>
                                
                                <!-- Extended Description Area -->
                                <div class="bg-slate-950/50 border-l-4 border-blue-500 p-4 rounded-r-lg mt-4">
                                    <h4 class="text-xs font-bold text-blue-400 uppercase tracking-wider mb-2">Lesson Overview</h4>
                                    <p id="playerDesc" class="text-slate-300 text-sm leading-relaxed">
                                        Welcome to Table By YOCO Training. Use the navigation to select a module and begin your learning journey.
                                    </p>
                                </div>
                            </div>
                            
                            <div class="flex-none pt-2">
                                <a id="externalLink" href="#" target="_blank" class="inline-flex items-center justify-center gap-2 bg-slate-800 hover:bg-slate-700 text-slate-300 hover:text-white text-sm font-medium py-2.5 px-5 rounded-lg border border-slate-700 hover:border-slate-600 transition-all group shadow-md">
                                    <i class="fab fa-google-drive group-hover:text-green-400 transition-colors"></i>
                                    <span>Source File</span>
                                    <i class="fas fa-arrow-up-right-from-square text-xs opacity-50 ml-1"></i>
                                </a>
                            </div>
                        </div>
                    </div>
                    
                    <!-- FAQ Section -->
                    <div class="mt-12 mb-8">
                        <h3 class="text-xl font-bold text-white mb-6 flex items-center gap-2 border-b border-white/10 pb-4">
                            <i class="fas fa-circle-question text-blue-500"></i> Frequently Asked Questions
                        </h3>
                        <div class="space-y-3" id="faqContainer">
                            <!-- Injected via JS -->
                        </div>
                    </div>
                </div>

                <!-- Mobile List Fallback -->
                <div class="md:hidden pb-12 mt-8">
                    <div class="flex items-center justify-between mb-4 border-b border-white/5 pb-2">
                        <h3 class="font-bold text-xs text-slate-500 uppercase tracking-widest">Available Lessons</h3>
                        <span id="mobileVideoCount" class="text-[10px] bg-slate-800 text-slate-300 px-2 py-0.5 rounded-full">0</span>
                    </div>
                    <div id="mobileVideoList" class="space-y-2"></div>
                </div>

            </div>

            <!-- Right Playlist Panel (Desktop) -->
            <div class="hidden md:flex w-80 lg:w-96 glass-panel flex-col h-full overflow-hidden border-l border-white/5 bg-slate-900/30">
                <div class="p-5 border-b border-white/5 flex items-center justify-between bg-slate-950/30">
                    <h3 class="font-bold text-xs text-slate-400 uppercase tracking-widest flex items-center gap-2">
                        <i class="fas fa-list-ul"></i> Up Next
                    </h3>
                    <span id="desktopVideoCount" class="text-[10px] bg-slate-800 text-slate-400 px-2 py-0.5 rounded border border-slate-700/50">0 Videos</span>
                </div>
                <div id="desktopVideoList" class="flex-1 overflow-y-auto p-3 space-y-1 custom-scrollbar">
                    <!-- Playlist Items -->
                </div>
            </div>

        </main>
    </div>

    <!-- WhatsApp Floating Support Widget -->
    <div id="supportWidget" class="fixed bottom-6 right-6 z-[100] flex flex-col items-end gap-3 translate-y-20 opacity-0 transition-all duration-700 ease-out">
        <!-- Chat Bubble -->
        <div id="supportBubble" class="bg-slate-800 text-sm text-slate-200 p-3 rounded-xl shadow-2xl border border-white/10 relative max-w-[200px] animate-pulse">
            <p>Need support with something? We're here to help!</p>
            <!-- Close Bubble Button -->
            <button onclick="closeSupportBubble(event)" class="absolute -top-2 -right-2 bg-slate-700 hover:bg-slate-600 rounded-full w-5 h-5 flex items-center justify-center text-[10px] text-white transition-colors border border-white/10">
                <i class="fas fa-times"></i>
            </button>
            <!-- Chat tail arrow -->
            <div class="absolute -bottom-2 right-6 w-4 h-4 bg-slate-800 border-b border-r border-white/10 transform rotate-45"></div>
        </div>
        
        <!-- WhatsApp FAB -->
        <a href="https://wa.me/27660392596" target="_blank" class="w-14 h-14 bg-green-500 rounded-full flex items-center justify-center text-white text-3xl shadow-[0_8px_30px_rgb(34,197,94,0.4)] hover:bg-green-400 hover:scale-110 hover:-translate-y-1 transition-all z-10 relative">
            <i class="fab fa-whatsapp"></i>
        </a>
    </div>

    <script>
        // --- DATA MODEL WITH DESCRIPTIONS ---
        const videos = [
            // --- PRODUCT V2 (BOH) ---
            { src: "1.Creating:Editing Menu V2.mov", id: "1tVfpTsBGkShVN1yPKs0AtDModM6qS7FG", title: "1. Creating/Editing Menu", category: "product", section: 'boh', description: "Learn the fundamentals of building and updating your main menu structure, including adding new categories and arranging items." },
            { src: "2. Creating:Editing Menu Categories V2.mov", id: "1yHk0bEee6N0HZb1e1Ej7J_Zlph-3dqSj", title: "2. Creating/Editing Menu Categories", category: "product", section: 'boh', description: "A deep dive into setting up menu categories to group your offerings logically for easier navigation on the POS." },
            { src: "3.Creating Inventory Categories V2.mov", id: "1W_-4ROwu-OxovG75jOJYo4STMxebJlJ_", title: "3. Creating Inventory Categories", category: "product", section: 'boh', description: "Discover how to organize your back-of-house raw materials and components by creating structured inventory categories." },
            { src: "4. Creating:Editing Finished Good Product V2.mov", id: "1mE1p8g0-cI1uYM4YMyTUf522ZT4mkrfU", title: "4. Creating/Editing Finished Good Product", category: "product", section: 'boh', description: "Step-by-step guide on adding final sellable items to your system, setting prices, and assigning them to menu categories." },
            { src: "5. Creating:editing Raw Materials V2.mov", id: "1XZG0IN5DgJUTNHo20WLM-EA9RijT4zr8", title: "5. Creating/Editing Raw Materials", category: "product", section: 'boh', description: "Learn how to accurately input base ingredients and components used to construct your finished goods." },
            { src: "6. Assigning a Product:Raw Material to finished good products V2.mov", id: "1xxJgET6sh69xZd_uw0oIh1jERLYtuj8n", title: "6. Assigning Recipes to Finished Goods", category: "product", section: 'boh', description: "Connect the dots by linking raw materials to finished goods to create accurate recipes for inventory tracking." },
            { src: "7. Creating a Modifier Product V2.mov", id: "1opHdAnr06wP89jsvZ2lA6MhOhXsP7jRE", title: "7. Creating a Modifier Product", category: "product", section: 'boh', description: "Set up add-ons, side choices, or variations (like extra cheese or meal sizes) that customers can attach to their main order." },
            { src: "8. Creating Modifer as an Option Type(instructions) V2.mov", id: "1xOLP5uFm2DQs3sJtSx2VQHPv8xUbBtJ_", title: "8. Modifier as an Option Type", category: "product", section: 'boh', description: "How to configure modifier options strictly as kitchen instructions (e.g., 'Medium Rare') that don't affect stock." },
            { src: "9. Creating Modifiers as a Product with Normal & reverse Stock Movment V2.mov", id: "1BnZI3DUmugSU27mW6o9Oot2U4fTUySWp", title: "9. Modifiers with Stock Movement", category: "product", section: 'boh', description: "Advanced modifier setups explaining how extra ingredients track deductively against your actual inventory." },
            { src: "10. Creating:Editing Modifier Groups V2.mov", id: "1K8eTgtTUc5aVXeWOm3RZ_Eo5S7fyQVg6", title: "10. Creating/Editing Modifier Groups", category: "product", section: 'boh', description: "Bundle multiple modifiers together into cohesive groups (e.g., 'Pizza Toppings') for faster ordering." },
            { src: "11. Creating Manufactured Item:product V2.mov", id: "1YbFvkcE6yHGaTfETZ_C7DpuO-UNGbIXN", title: "11. Creating Manufactured Items ", category: "product", section: 'boh', description: "Set up batched or prep items (like a batch of soup or dough) that are made in-house before being sold." },
            { src: "12.Manufacturing a Item_s(Updating stock on hand) V2.mov", id: "10vpi3xR6ji426WZfKinKGuTInfaY0jrm", title: "12. Manufacturing Items (Stock Update)", category: "product", section: 'boh', description: "Learn how the act of manufacturing an item updates your stock, deducting raw materials and adding prepped goods." },

            // --- INVENTORY (BOH) ---
            { src: "1.Creating_Editing Suppliers.mp4", id: "1I5AJ4gZqemHwtKO_ltRT6wQTDoggizbm", title: "1. Creating/Editing Suppliers", category: "inventory", section: 'boh', description: "Add and manage your vendor details to streamline the ordering and receiving process." },
            { src: "2.Stock Templates & Stock Count(Products).mp4", id: "1DFHGbwCGFECnZc7_dhbvnFNHUR289aXG", title: "2. Stock Templates & Stock Count", category: "inventory", section: 'boh', description: "Generate templates to make daily, weekly, or monthly stock takes efficient and accurate." },
            { src: "3.Stock Count Template & Stock Count BOH(Per Inventory Category).mp4", id: "1Gfds2N690DFlVvneLQDGjYeNuuBJwSJj", title: "3. Stock Count Template & BOH", category: "inventory", section: 'boh', description: "Execute stock counts segmented specifically by inventory categories for targeted auditing." },
            { src: "4.Stock Adjustments(Increase, Set, Wastage).mp4", id: "1zXFZYZDpE4z_4ZvRNoY9U1Znl-YYFiLC", title: "4. Stock Adjustments (Wastage)", category: "inventory", section: 'boh', description: "Log spillages, spoilage, or manual corrections to keep your system's inventory perfectly aligned with reality." },
            { src: "5.Goods Receipts.mp4", id: "18V66Gx7roYEgCW7k9lYBNALkAyBHmYIl", title: "5. Goods Receipts", category: "inventory", section: 'boh', description: "Learn how to formally receive incoming stock from suppliers and update your system quantities." },
            { src: "6.Credit Note on Goods Receipts.mp4", id: "1JoKaiwKlmHJq_egJ_cyitKntzclM9Gc_", title: "6. Credit Note on Goods Receipts", category: "inventory", section: 'boh', description: "Handle returns or short deliveries from suppliers by logging credit notes directly against a receipt." },
            { src: "7.Manual Credit Note.mp4", id: "1cDt8M3_BLOP3SHMTCUFcqDs3WcrLzKNX", title: "7. Manual Credit Note", category: "inventory", section: 'boh', description: "Process ad-hoc or unlinked credits from your suppliers to keep your accounts accurate." },
            { src: "8. Stock Transfers(Stock location to Stock Location).mp4", id: "11Xk9xpn23PqpG1M0wp7XWCJI4Rp-FqqO", title: "8. Stock Transfers", category: "inventory", section: 'boh', description: "Move physical items from one internal location (e.g., Main Storeroom) to another (e.g., Front Fridge)." },
            { src: "8.1 Current stock on Hand Excel sheet per Stock Location.mp4", id: "1RvKA3n037MBfmz43mhajeFViXqsJpQih", title: "8.1 Stock on Hand Excel", category: "inventory", section: 'boh', description: "Export and review your real-time stock levels broken down by location using Excel reporting." },
            { src: "9. Creating_Editing Stock Locations.mp4", id: "1DkLRTN5u8sh2kmGNxpqh6vHL1C_SRdR9", title: "9. Creating/Editing Stock Locations", category: "inventory", section: 'boh', description: "Define the physical areas in your venue where inventory is stored to optimize tracking and stock takes." },
            { src: "9.1 Managing Stock Locations Per Product.mp4", id: "1rRIy40fwdG9_rA5k6guTWGoI6047iAuy", title: "9.1 Managing Locations Per Product", category: "inventory", section: 'boh', description: "Assign specific products to distinct stock locations to ensure accurate decrementing when sales occur." },

            // --- EMPLOYEE V2 (BOH) ---
            { src: "Creating an Employee V2.mov", id: "14A6N7zUob8s_yNLp_vKHJAU0rdsEr43r", title: "1. Creating an Employee", category: "employee", section: 'boh', description: "Add new staff members to the system and generate their secure login PINs." },
            { src: "Understanding Employee Roles V2.mov", id: "1VS9k8fDoXQDOFuVqH5rH7auzRATRbN_j", title: "2. Understanding Employee Roles", category: "employee", section: 'boh', description: "Learn how to restrict or grant access to system features by assigning designated roles (e.g., Manager, Waiter)." },

            // --- SITE V2 (BOH) ---
            { src: "99.1 Creating Account Payment Method.mov", id: "1Q5DT-WneDU9002xTeNUXauAwQT_wsbGe", title: "99.1 Creating Account Payment Method", category: "site", section: 'boh', description: "Configure custom payment options allowing customers to charge to a running house account." },
            { src: "99.2 Creating:Editing Accounts(Members).mov", id: "1tQuEJswK8nubfuITN-Q5yWiBksyFuSOk", title: "99.2 Creating/Editing Accounts (Members)", category: "site", section: 'boh', description: "Manage customer profiles, members, or corporate clients who hold credit accounts with you." },
            { src: "99.3 Credit limit and Deposit's on accounts.mov", id: "1zn1TcCj7M0JGZfpjwHhGMq4HtpshwSZb", title: "99.3 Credit Limit & Deposits", category: "site", section: 'boh', description: "Set maximum spending caps and process upfront deposits against member accounts." },
            { src: "Creating & Managing Prep Locations.mov", id: "17x1faQegA8R_Cy9raxe5WtAA80LwL5lM", title: "Creating & Managing Prep Locations", category: "site", section: 'boh', description: "Route printing effectively by setting up prep stations like 'Hot Kitchen', 'Bar', or 'Dessert Station'." },
            { src: "Creating and managing payment methods.mov", id: "1mtCT50N6I-XHEKxhj5yWulbinxxvh8f_", title: "Creating & Managing Payment Methods", category: "site", section: 'boh', description: "Define exactly how your business accepts payments (Cash, Card, Snapscan, etc.) on the POS." },
            { src: "Creating_Managing Discounts.mov", id: "1gvtcmprNb5nyihuOIlPtHF2b3FmQfuO4", title: "Creating/Managing Discounts", category: "site", section: 'boh', description: "Set up percentage or flat-rate discounts for promotions, staff meals, or comps." },
            { src: "Register Devices.mov", id: "1MqlXAMw-IWCtYxLk154oD7YIrGoV06wC", title: "Register Devices", category: "site", section: 'boh', description: "Securely link your physical POS hardware tablets or screens to your YOCO cloud account." },
            { src: "Sit Down Area Setup.mov", id: "1DYsxyHBcM1OMW9Kgiv6T4IaGG88Ov4Wc", title: "Sit Down Area Setup", category: "site", section: 'boh', description: "Map out your restaurant floor plan, creating tables and sections for seamless dine-in service." }
        ];

        // --- FAQ DATA ---
        const faqs = [
            {
                q: "What's the difference between Raw Materials and Finished Goods?",
                a: "Raw Materials are the base ingredients you purchase from suppliers (e.g., flour, cheese, whole tomatoes). Finished Goods are the final items you actually sell to your customers on the menu (e.g., Margherita Pizza). You link Raw Materials to Finished Goods to create recipes."
            },
            {
                q: "How do I handle food wastage or spoilage?",
                a: "Navigate to the Inventory module and watch the 'Stock Adjustments' lesson. You can log wastage specifically so your stock quantities remain accurate without affecting your sales numbers."
            },
            {
                q: "Can I stop staff from giving unauthorized discounts?",
                a: "Yes. In the Employee module ('Understanding Employee Roles'), you can set up specific permission levels. By restricting the 'Discount' capability, staff will need a Manager's PIN to authorize any price reductions."
            },
            {
                q: "How does a 'Manufactured Item' work?",
                a: "A Manufactured Item is something you prep in-house before selling it. For example, making a large batch of pasta sauce. When you manufacture it in the system, it automatically deducts the raw ingredients (tomatoes, herbs) and adds the final sauce to your available stock."
            }
        ];

        // --- CONFIGURATION ---
        const moduleConfig = {
            'boh': [
                { id: 'all', label: 'All BOH Modules', icon: 'fa-layer-group' },
                { id: 'product', label: 'Product Management', icon: 'fa-box-open' },
                { id: 'inventory', label: 'Inventory Management', icon: 'fa-clipboard-check' },
                { id: 'employee', label: 'Staff & Roles ', icon: 'fa-users-gear' },
                { id: 'site', label: 'Site Management ', icon: 'fa-store' }
            ],
            'foh': [
                { id: 'all', label: 'All FOH Modules', icon: 'fa-layer-group' },
                { id: 'pos', label: 'POS Basics', icon: 'fa-cash-register' },
                { id: 'orders', label: 'Order Taking', icon: 'fa-tablet-screen-button' },
                { id: 'payments', label: 'Payments & Bills', icon: 'fa-credit-card' },
                { id: 'service', label: 'Service Workflow', icon: 'fa-bell-concierge' }
            ]
        };

        // --- STATE ---
        let currentSection = 'boh';
        let currentCategory = 'all';

        // --- DOM ELEMENTS ---
        const dom = {
            desktopList: document.getElementById('desktopVideoList'),
            mobileList: document.getElementById('mobileVideoList'),
            desktopSearch: document.getElementById('desktopSearchInput'),
            mobileSearch: document.getElementById('mobileSearchInput'),
            playerTitle: document.getElementById('playerTitle'),
            playerDesc: document.getElementById('playerDesc'),
            playerSectionTag: document.getElementById('playerSectionTag'),
            playerCategoryTag: document.getElementById('playerCategoryTag'),
            desktopCount: document.getElementById('desktopVideoCount'),
            mobileCount: document.getElementById('mobileVideoCount'),
            externalLink: document.getElementById('externalLink'),
            drivePlayer: document.getElementById('drivePlayer'),
            desktopNav: document.getElementById('categoryNav'),
            mobileNav: document.getElementById('mobileCategoryNav'),
            faqContainer: document.getElementById('faqContainer'),
            supportWidget: document.getElementById('supportWidget')
        };

        // --- INIT ---
        window.onload = () => {
            renderNavigation();
            applyFilters();
            renderFAQs();
            
            // Auto-load first video if available
            const initialVideos = videos.filter(v => v.section === 'boh');
            if(initialVideos.length > 0) loadVideo(initialVideos[0], null);

            // Show Support Widget after 4 seconds
            setTimeout(() => {
                if(dom.supportWidget) {
                    dom.supportWidget.classList.remove('translate-y-20', 'opacity-0');
                }
            }, 4000);
            
            // Remove pulse animation from bubble after 10 seconds so it's not annoying
            setTimeout(() => {
                const bubble = document.getElementById('supportBubble');
                if(bubble) bubble.classList.remove('animate-pulse');
            }, 10000);
        };

        // --- CORE FUNCTIONS ---

        function renderNavigation() {
            const modules = moduleConfig[currentSection];
            
            // Desktop Nav
            dom.desktopNav.innerHTML = modules.map(mod => `
                <button onclick="filterVideos('${mod.id}')" 
                    class="nav-btn ${currentCategory === mod.id ? 'active-category' : ''}">
                    <i class="fas ${mod.icon}"></i> ${mod.label}
                </button>
            `).join('');

            // Mobile Nav
            dom.mobileNav.innerHTML = modules.map(mod => `
                <button onclick="filterVideos('${mod.id}')" 
                    class="${currentCategory === mod.id 
                        ? 'px-4 py-1.5 rounded-full text-[11px] font-bold bg-blue-600 text-white shadow-lg' 
                        : 'px-4 py-1.5 rounded-full text-[11px] font-medium bg-slate-800 text-slate-400 border border-slate-700'} whitespace-nowrap">
                    ${mod.label}
                </button>
            `).join('');
        }

        function filterVideos(category) {
            currentCategory = category;
            renderNavigation(); 
            applyFilters();
        }

        function applyFilters() {
            const query = (dom.desktopSearch.value || dom.mobileSearch.value).toLowerCase();
            
            const filtered = videos.filter(v => {
                const matchSection = v.section === currentSection;
                const matchCat = currentCategory === 'all' || v.category === currentCategory;
                const matchSearch = v.title.toLowerCase().includes(query) || v.description.toLowerCase().includes(query);
                return matchSection && matchCat && matchSearch;
            });
            
            renderList(filtered);
        }

        function renderList(items) {
            dom.desktopCount.innerText = `${items.length} Lesson${items.length !== 1 ? 's' : ''}`;
            dom.mobileCount.innerText = items.length;

            const emptyMsg = `
                <div class="flex flex-col items-center justify-center py-12 text-slate-500">
                    <i class="fas fa-film text-3xl mb-3 opacity-20"></i>
                    <p class="text-xs font-medium">No lessons found.</p>
                </div>
            `;
            
            dom.desktopList.innerHTML = '';
            dom.mobileList.innerHTML = '';

            if(items.length === 0) {
                dom.desktopList.innerHTML = emptyMsg;
                dom.mobileList.innerHTML = emptyMsg;
                return;
            }

            items.forEach((vid) => {
                const thumbnailUrl = `https://drive.google.com/thumbnail?id=${vid.id}&sz=w300`;
                const catLabel = getCategoryLabel(vid.category);
                
                // Escape quotes for tooltips
                const safeDesc = vid.description.replace(/"/g, '&quot;').replace(/'/g, "&#39;");
                
                const itemHTML = `
                    <div class="flex items-center gap-3 w-full">
                        <div class="flex-none w-16 h-10 md:w-20 md:h-12 rounded-md overflow-hidden bg-slate-800 relative shadow-md group-hover:ring-1 ring-white/10">
                            <img src="${thumbnailUrl}" class="w-full h-full object-cover opacity-70 group-hover:opacity-100 transition-opacity" alt="Thumb" loading="lazy">
                            <div class="absolute inset-0 bg-gradient-to-t from-black/60 to-transparent"></div>
                            <i class="fas fa-play absolute bottom-1 left-1.5 text-[8px] text-white opacity-80"></i>
                        </div>
                        <div class="flex-1 min-w-0 py-0.5">
                            <h4 class="text-xs md:text-sm font-medium text-slate-300 group-hover:text-white leading-tight line-clamp-2 transition-colors">${vid.title}</h4>
                            <div class="flex items-center gap-2 mt-1">
                                 <span class="text-[9px] text-slate-500 font-bold uppercase tracking-wider">${catLabel}</span>
                            </div>
                        </div>
                        <div class="flex-none pl-2 relative" data-tooltip="${safeDesc}">
                            <div class="w-6 h-6 rounded-full bg-slate-800/80 hover:bg-blue-500/20 border border-slate-700 hover:border-blue-500/50 flex items-center justify-center transition-all cursor-help">
                                <i class="fas fa-info text-[10px] text-slate-400"></i>
                            </div>
                        </div>
                    </div>
                `;
                
                // Desktop Item
                const dItem = document.createElement('div');
                dItem.className = "playlist-item p-2 rounded-lg cursor-pointer group mb-1 relative";
                dItem.dataset.id = vid.id;
                dItem.onclick = () => loadVideo(vid, dItem);
                dItem.innerHTML = itemHTML;
                dom.desktopList.appendChild(dItem);

                // Mobile Item
                const mItem = document.createElement('div');
                mItem.className = "playlist-item p-3 bg-slate-900/50 rounded-xl cursor-pointer group active:bg-slate-800 border border-white/5 mb-2 relative";
                mItem.onclick = () => loadVideo(vid, null);
                mItem.innerHTML = itemHTML;
                dom.mobileList.appendChild(mItem);
            });
        }

        function loadVideo(vid, element) {
            const driveUrl = `https://drive.google.com/file/d/${vid.id}/preview`;
            
            if(dom.drivePlayer.src !== driveUrl) {
                dom.drivePlayer.src = driveUrl;
            }
            
            dom.playerTitle.innerText = vid.title;
            dom.playerSectionTag.innerText = vid.section === 'boh' ? 'Back of House' : 'Front of House';
            dom.playerCategoryTag.innerText = getCategoryLabel(vid.category);
            
            // Insert specific video description
            dom.playerDesc.innerText = vid.description || `Now viewing lesson from ${getCategoryLabel(vid.category)}.`;
            
            dom.externalLink.href = `https://drive.google.com/file/d/${vid.id}/view?usp=sharing`;
            
            // Highlight active
            document.querySelectorAll('.playlist-item').forEach(el => el.classList.remove('active-video'));
            
            if(element) {
                element.classList.add('active-video');
            } else {
                const deskEquivalent = Array.from(document.querySelectorAll('#desktopVideoList .playlist-item'))
                                           .find(el => el.dataset.id === vid.id);
                if(deskEquivalent) {
                    deskEquivalent.classList.add('active-video');
                    deskEquivalent.scrollIntoView({ behavior: 'smooth', block: 'center' });
                }
            }
            
            if(window.innerWidth < 768) {
                window.scrollTo({ top: 0, behavior: 'smooth' });
            }
        }

        // --- FAQ LOGIC ---
        function renderFAQs() {
            dom.faqContainer.innerHTML = faqs.map((faq, index) => `
                <div class="faq-item bg-slate-900/50 border border-slate-800 rounded-lg overflow-hidden transition-all">
                    <button class="w-full text-left p-4 flex items-center justify-between focus:outline-none hover:bg-slate-800/50 transition-colors" onclick="toggleFAQ(this)">
                        <span class="font-medium text-slate-200 text-sm">${faq.q}</span>
                        <i class="fas fa-chevron-down text-slate-500 text-xs transition-transform duration-300"></i>
                    </button>
                    <div class="faq-content px-4 text-slate-400 text-sm leading-relaxed border-t border-transparent">
                        <p class="pt-2 pb-1">${faq.a}</p>
                    </div>
                </div>
            `).join('');
        }

        function toggleFAQ(button) {
            const faqItem = button.parentElement;
            const content = faqItem.querySelector('.faq-content');
            const isActive = faqItem.classList.contains('active');
            
            // Close all others
            document.querySelectorAll('.faq-item').forEach(item => {
                item.classList.remove('active');
                item.querySelector('.faq-content').style.borderColor = 'transparent';
            });

            if (!isActive) {
                faqItem.classList.add('active');
                content.style.borderColor = 'rgba(255,255,255,0.05)';
            }
        }

        // --- UTILS ---
        function getCategoryLabel(catId) {
            const allModules = [...moduleConfig.boh, ...moduleConfig.foh];
            const found = allModules.find(m => m.id === catId);
            return found ? found.label : 'General';
        }

        function closeSupportBubble(e) {
            e.stopPropagation();
            document.getElementById('supportBubble').style.display = 'none';
        }

        // Sync Search
        dom.desktopSearch.addEventListener('input', (e) => { dom.mobileSearch.value = e.target.value; applyFilters(); });
        dom.mobileSearch.addEventListener('input', (e) => { dom.desktopSearch.value = e.target.value; applyFilters(); });

    </script>
</body>
</html>
